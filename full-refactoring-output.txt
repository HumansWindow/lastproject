Starting database refactoring process...
Time: 2025-05-08T13:36:08.090Z
Backup directory: /home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backups/db/2025-05-08T13-36-08-087Z
Creating database backup...
Database backup created at /home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backups/db/2025-05-08T13-36-08-087Z/full-database-backup.sql
Running SQL script: Create backup tables...
                                 ?column?                                  
---------------------------------------------------------------------------
 CREATE TABLE backup_wallet_challenges AS SELECT * FROM wallet_challenges;
 CREATE TABLE backup_users AS SELECT * FROM users;
 CREATE TABLE backup_user_devices AS SELECT * FROM user_devices;
 CREATE TABLE backup_wallets AS SELECT * FROM wallets;
 CREATE TABLE backup_user_sessions AS SELECT * FROM user_sessions;
 CREATE TABLE backup_referral_codes AS SELECT * FROM referral_codes;
(6 rows)

Successfully ran SQL script: Create backup tables
Finding issues with entity files...
Running script: find-missing-primary-columns.js...
Scanning entity files for issues...
Found 40 entity files
Report generated at /home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/entity-issues-report.md
Found 37 entities with issues. See /home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/entity-issues-report.md for details.
Error running script find-missing-primary-columns.js: Script exited with status code 1
Warning: Could not complete entity issue detection. Continuing with caution...
Fixing entity files with primary column issues...
Running script: fix-all-entity-columns.js...
Finding entity files...
Found 40 entity files
Processing user-device (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/users/entities/user-device.entity.ts)...
Processing user-session (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/users/entities/user-session.entity.ts)...
Processing user (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/users/entities/user.entity.ts)...
Processing diary (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/diary/entities/diary.entity.ts)...
Processing minting-queue-item (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/blockchain/entities/minting-queue-item.entity.ts)...
Processing device-fingerprint (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/blockchain/entities/device-fingerprint.entity.ts)...
Processing minting-record (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/blockchain/entities/minting-record.entity.ts)...
Processing apy-tier (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/blockchain/entities/apy-tier.entity.ts)...
Processing wallet (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/blockchain/entities/wallet.entity.ts)...
Processing staking-position (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/blockchain/entities/staking-position.entity.ts)...
Processing referral-code (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/referral/entities/referral-code.entity.ts)...
Processing referral (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/referral/entities/referral.entity.ts)...
Processing profile (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/profile/entities/profile.entity.ts)...
Processing token-transaction (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/token/entities/token-transaction.entity.ts)...
Processing wallet (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/wallets/entities/wallet.entity.ts)...
Processing nft (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/nft/entities/nft.entity.ts)...
Processing refresh-token (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/auth/entities/refresh-token.entity.ts)...
Processing account (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/accounts/entities/account.entity.ts)...
Processing module-unlock-schedule (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/game/entities/module-unlock-schedule.entity.ts)...
Processing achievement (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/game/entities/achievement.entity.ts)...
Processing content-template (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/game/entities/content-template.entity.ts)...
Processing game-module (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/game/entities/game-module.entity.ts)...
Processing collaboration-comment (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/game/entities/collaboration-comment.entity.ts)...
Processing media-asset (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/game/entities/media-asset.entity.ts)...
Processing section-unlock-schedule (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/game/entities/section-unlock-schedule.entity.ts)...
Processing content-approval (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/game/entities/content-approval.entity.ts)...
Processing user-notification (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/game/entities/user-notification.entity.ts)...
Processing user-progress (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/game/entities/user-progress.entity.ts)...
Processing section-content (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/game/entities/section-content.entity.ts)...
Processing game-notification-template (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/game/entities/game-notification-template.entity.ts)...
Processing section-checkpoint (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/game/entities/section-checkpoint.entity.ts)...
Processing module-notification-schedule (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/game/entities/module-notification-schedule.entity.ts)...
Processing reward-transaction (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/game/entities/reward-transaction.entity.ts)...
Processing user-quiz-response (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/game/entities/quiz/user-quiz-response.entity.ts)...
Processing quiz (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/game/entities/quiz/quiz.entity.ts)...
Processing quiz-session (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/game/entities/quiz/quiz-session.entity.ts)...
Processing quiz-question (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/game/entities/quiz/quiz-question.entity.ts)...
Processing content-version (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/game/entities/content-version.entity.ts)...
Processing user-achievement (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/game/entities/user-achievement.entity.ts)...
Processing game-section (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/game/entities/game-section.entity.ts)...

Processed 40 files
Made changes to 0 files
Successfully ran script: fix-all-entity-columns.js
Standardizing column names in entity files...
Running script: standardize-entity-column-names.js...
Finding entity files...
Found 40 entity files
Processing user-device (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/users/entities/user-device.entity.ts)...
Processing user-session (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/users/entities/user-session.entity.ts)...
Processing user (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/users/entities/user.entity.ts)...
Processing diary (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/diary/entities/diary.entity.ts)...
Processing minting-queue-item (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/blockchain/entities/minting-queue-item.entity.ts)...
Processing device-fingerprint (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/blockchain/entities/device-fingerprint.entity.ts)...
Processing minting-record (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/blockchain/entities/minting-record.entity.ts)...
Processing apy-tier (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/blockchain/entities/apy-tier.entity.ts)...
Processing wallet (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/blockchain/entities/wallet.entity.ts)...
Processing staking-position (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/blockchain/entities/staking-position.entity.ts)...
Processing referral-code (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/referral/entities/referral-code.entity.ts)...
Processing referral (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/referral/entities/referral.entity.ts)...
Processing profile (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/profile/entities/profile.entity.ts)...
Processing token-transaction (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/token/entities/token-transaction.entity.ts)...
Processing wallet (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/wallets/entities/wallet.entity.ts)...
Processing nft (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/nft/entities/nft.entity.ts)...
Processing refresh-token (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/auth/entities/refresh-token.entity.ts)...
Processing account (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/accounts/entities/account.entity.ts)...
Processing module-unlock-schedule (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/game/entities/module-unlock-schedule.entity.ts)...
Processing achievement (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/game/entities/achievement.entity.ts)...
Processing content-template (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/game/entities/content-template.entity.ts)...
Processing game-module (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/game/entities/game-module.entity.ts)...
Processing collaboration-comment (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/game/entities/collaboration-comment.entity.ts)...
Processing media-asset (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/game/entities/media-asset.entity.ts)...
Processing section-unlock-schedule (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/game/entities/section-unlock-schedule.entity.ts)...
Processing content-approval (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/game/entities/content-approval.entity.ts)...
Processing user-notification (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/game/entities/user-notification.entity.ts)...
Processing user-progress (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/game/entities/user-progress.entity.ts)...
Processing section-content (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/game/entities/section-content.entity.ts)...
Processing game-notification-template (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/game/entities/game-notification-template.entity.ts)...
Processing section-checkpoint (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/game/entities/section-checkpoint.entity.ts)...
Processing module-notification-schedule (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/game/entities/module-notification-schedule.entity.ts)...
Processing reward-transaction (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/game/entities/reward-transaction.entity.ts)...
Processing user-quiz-response (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/game/entities/quiz/user-quiz-response.entity.ts)...
Processing quiz (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/game/entities/quiz/quiz.entity.ts)...
Processing quiz-session (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/game/entities/quiz/quiz-session.entity.ts)...
Processing quiz-question (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/game/entities/quiz/quiz-question.entity.ts)...
Processing content-version (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/game/entities/content-version.entity.ts)...
Processing user-achievement (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/game/entities/user-achievement.entity.ts)...
Processing game-section (/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/backend/src/game/entities/game-section.entity.ts)...

Processed 40 files
Made changes to 0 files
Successfully ran script: standardize-entity-column-names.js
Running SQL script: Standardize column names...
BEGIN
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:6: NOTICE:  column "userid" of relation "users" does not exist, skipping
ALTER TABLE
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:7: NOTICE:  column "user_id" of relation "users" does not exist, skipping
ALTER TABLE
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:8: ERROR:  column "createdAt" does not exist
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:9: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:10: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:11: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:12: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:13: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:14: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:15: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:16: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:17: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:18: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:19: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:20: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:21: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:22: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:25: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:26: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:27: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:28: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:29: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:30: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:31: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:32: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:33: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:34: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:35: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:36: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:37: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:38: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:39: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:40: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:41: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:44: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:45: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:46: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:47: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:48: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:49: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:50: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:51: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:52: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:54: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:55: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:58: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:59: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:60: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:61: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:64: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:65: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:66: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:67: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:68: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:71: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:72: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:73: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:74: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:75: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:78: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:79: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:80: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:81: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:82: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:83: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:84: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:85: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:86: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:87: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:88: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:89: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:90: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:91: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:92: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:93: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:94: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:95: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:96: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:97: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:98: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/standardize-column-names.sql:99: ERROR:  current transaction is aborted, commands ignored until end of transaction block
ROLLBACK
Successfully ran SQL script: Standardize column names
Running SQL script: Fix foreign keys...
BEGIN
ALTER TABLE
ALTER TABLE
ALTER TABLE
ALTER TABLE
ALTER TABLE
ALTER TABLE
ALTER TABLE
ALTER TABLE
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/fix-foreign-keys.sql:44: NOTICE:  constraint "fk_referral_codes_users" of relation "referral_codes" does not exist, skipping
ALTER TABLE
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/fix-foreign-keys.sql:49: ERROR:  foreign key constraint "fk_referral_codes_users" cannot be implemented
DETAIL:  Key columns "user_id" and "id" are of incompatible types: integer and uuid.
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/fix-foreign-keys.sql:53: ERROR:  current transaction is aborted, commands ignored until end of transaction block
psql:/home/alivegod/Desktop/4-Ordibehesht/LastProjectendpoint/LastProject/scripts/db-refactoring/sql/fix-foreign-keys.sql:58: ERROR:  current transaction is aborted, commands ignored until end of transaction block
ROLLBACK
Successfully ran SQL script: Fix foreign keys

✅ Database refactoring process completed!
Time: 2025-05-08T13:36:09.143Z
Please verify the changes and restart your application.
